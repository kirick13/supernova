
version: '3.7'

services:
  supernova-dev:
    container_name: supernova-dev
    build: ../
    environment:
      SUPERNOVA_DEBUG: true
      WEBHOOK_SECRET: deadbeef
    volumes:
      - type: bind
        source: ./config.yml
        target: /etc/supernova/config.yml
        read_only: true
      - type: bind
        source: ./projects
        target: /etc/supernova/projects
        read_only: true
      - type: bind
        source: ./.repos
        target: /var/supernova/repos
      - type: bind
        source: /var/run/docker.sock
        target: /var/run/docker.sock
    ports:
      - 48214:9000
